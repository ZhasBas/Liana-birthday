<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–° –î–Ω–µ–º –†–æ–∂–¥–µ–Ω–∏—è!</title>
    <style>
        /* --- –û–±—â–∏–µ —Å—Ç–∏–ª–∏ --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            min-height: 100vh;
            margin: 0;
            overflow: hidden; /* –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: —É–±–∏—Ä–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
        }

        /* --- –°–µ–∫—Ü–∏—è —Å —Ç–æ—Ä—Ç–æ–º (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) --- */
        #cake-section {
            position: relative;
            text-align: center;
            cursor: pointer;
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            z-index: 10;
        }

        #cake-section img {
            max-width: 300px;
            border-radius: 10px;
        }

        #click-prompt {
            margin-top: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .flame {
            position: absolute;
            width: 16px;
            height: 25px;
            background-color: #FFC107;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            box-shadow: 0 0 10px #FFC107, 0 0 20px #FFC107, 0 0 30px #FFEB3B;
            animation: flicker 1s infinite alternate;
            transform-origin: bottom;
            z-index: 11;
        }
        
        #flame1 { top: 35%; left: 47%; }

        @keyframes flicker {
            0% { transform: scaleY(1) scaleX(1); opacity: 1; }
            50% { transform: scaleY(0.9) scaleX(1.05); opacity: 0.8; }
            100% { transform: scaleY(1.05) scaleX(1); opacity: 1; }
        }
        
        /* --- –ù–û–í–ê–Ø –°–ï–ö–¶–ò–Ø: SWIPE APP --- */
        
        #swipe-app-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.7s ease-in;
            z-index: 5;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            /* –ó–∞–ø—Ä–µ—â–∞–µ–º "–≤—ã–¥–µ–ª–µ–Ω–∏–µ" —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ —Å–≤–∞–π–ø–µ */
            user-select: none; 
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        
        #swipe-app-section.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å—Ç–æ–ø–∫–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ */
        #card-stack {
            position: relative;
            width: 90vw;
            height: 80vh;
            max-width: 400px; /* –û–≥—Ä–∞–Ω–∏—á–∏–º –º–∞–∫—Å. —à–∏—Ä–∏–Ω—É */
            max-height: 600px; /* –û–≥—Ä–∞–Ω–∏—á–∏–º –º–∞–∫—Å. –≤—ã—Å–æ—Ç—É */
        }
        
        /* –°–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–∫–æ–Ω—á–∞—Ç—Å—è */
        #all-done-message {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8rem;
            color: #555;
            font-weight: bold;
            text-align: center;
            opacity: 0;
            transition: opacity 0.3s ease-in;
            z-index: 1; /* –ü–æ–¥ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ */
        }
        
        #all-done-message.visible {
            opacity: 1;
        }

        /* –°—Ç–∏–ª—å –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            position: absolute; /* –í—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ª–µ–∂–∞—Ç –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–µ */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
            
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 30px;
            box-sizing: border-box;
            font-size: 1.8rem;
            text-align: center;
            line-height: 1.5;
            color: #444;
            
            /* –ê–Ω–∏–º–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞/—É—Ö–æ–¥–∞ */
            transition: transform 0.3s ease-out;
            
            /* –ö—É—Ä—Å–æ—Ä "—Å—Ö–≤–∞—Ç–∏—Ç—å" */
            cursor: grab;
        }
        
        /* –ö–æ–≥–¥–∞ –º—ã –∞–∫—Ç–∏–≤–Ω–æ —Ç–∞—â–∏–º –∫–∞—Ä—Ç–æ—á–∫—É */
        .card.dragging {
            transition: none; /* –£–±–∏—Ä–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é, —á—Ç–æ–±—ã —Å–ª–µ–¥–æ–≤–∞–ª–æ –∑–∞ –∫—É—Ä—Å–æ—Ä–æ–º */
            cursor: grabbing; /* –ö—É—Ä—Å–æ—Ä "—Å—Ö–≤–∞—Ç–∏–ª" */
        }
        
        /* –†–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .card:nth-child(odd) { background-color: #e3f2fd; }
        .card:nth-child(even) { background-color: #fff9c4; }

        /* "–õ–∞–π–∫" / "–î–∏–∑–ª–∞–π–∫" –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã */
        .choice {
            position: absolute;
            top: 40px;
            font-size: 2.5rem;
            font-weight: bold;
            text-transform: uppercase;
            border-radius: 10px;
            padding: 10px 15px;
            opacity: 0; /* –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ –≤–∏–¥–Ω—ã */
            transition: opacity 0.1s linear;
        }
        
        .choice.like {
            left: 20px;
            color: #4CAF50;
            border: 4px solid #4CAF50;
            transform: rotate(-15deg);
        }
        
        .choice.nope {
            right: 20px;
            color: #F44336;
            border: 4px solid #F44336;
            transform: rotate(15deg);
        }

        /* --- –ö–ª–∞—Å—Å—ã –¥–ª—è JS --- */
        .hidden {
            display: none !important;
            opacity: 0 !important;
            transform: scale(0.8);
        }
    </style>
</head>
<body>

    <!-- 1. –°–ï–ö–¶–ò–Ø –° –¢–û–†–¢–û–ú -->
    <div id="cake-section">
        <img src="https://images.pexels.com/photos/1055272/pexels-photo-1055272.jpeg?auto-compress&cs=tinysrgb&w=600" alt="–¢–æ—Ä—Ç —Å–æ —Å–≤–µ—á–∞–º–∏">
        <div class="flame" id="flame1"></div>
        <div id="click-prompt">–ù–∞–∂–º–∏ –Ω–∞ —Ç–æ—Ä—Ç, —á—Ç–æ–±—ã –∑–∞–¥—É—Ç—å —Å–≤–µ—á–∏!</div>
    </div>

    <!-- 2. –°–ï–ö–¶–ò–Ø SWIPE APP -->
    <div id="swipe-app-section">
        <div id="card-stack">
            
            <!-- 
                –í–ê–ñ–ù–û: –ö–∞—Ä—Ç–æ—á–∫–∏ –≤ HTML –∏–¥—É—Ç "—Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö".
                –ü–æ—Å–ª–µ–¥–Ω—è—è –∫–∞—Ä—Ç–æ—á–∫–∞ –≤ –∫–æ–¥–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–∞ –ø–µ—Ä–≤–æ–π (–≤–µ—Ä—Ö–Ω–µ–π).
            -->
            
            <div class="card">
                –ö—Ä–µ–ø–∫–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è, –Ω–µ–∏—Å—Å—è–∫–∞–µ–º–æ–π —ç–Ω–µ—Ä–≥–∏–∏ –∏ –º–æ—Ä–µ –∏—Å–∫—Ä–µ–Ω–Ω–∏—Ö —É–ª—ã–±–æ–∫! üòä
                <div class="choice like">Like</div>
                <div class="choice nope">Nope</div>
            </div>

            <div class="card">
                –ü—É—Å—Ç—å –≤—Å–µ —Ç–≤–æ–∏ –º–µ—á—Ç—ã —Å–±—ã–≤–∞—é—Ç—Å—è, –∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø—Ä–∏–Ω–æ—Å–∏—Ç —Ä–∞–¥–æ—Å—Ç—å! üöÄ
                <div class="choice like">Like</div>
                <div class="choice nope">Nope</div>
            </div>
            
            <div class="card">
                –ñ–µ–ª–∞—é —Å–∞–º–æ–≥–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ–≥–æ –≥–æ–¥–∞, –ø–æ–ª–Ω–æ–≥–æ —Å—á–∞—Å—Ç—å—è, –ª—é–±–≤–∏ –∏ —É—Å–ø–µ—Ö–∞! üåü
                <div class="choice like">Like</div>
                <div class="choice nope">Nope</div>
            </div>

            <div class="card">
                ü•≥ –° –î–Ω–µ–º –†–æ–∂–¥–µ–Ω–∏—è! ü•≥<br><br>–ü—É—Å—Ç—å —ç—Ç–æ—Ç –≥–æ–¥ –±—É–¥–µ—Ç –ø–æ–ª–æ–Ω —è—Ä–∫–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤!
                <div class="choice like">Like</div>
                <div class="choice nope">Nope</div>
            </div>
            
            <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –∫–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å -->
            <div id="all-done-message">
                –ù–∞ —Å–µ–≥–æ–¥–Ω—è –≤—Å–µ!<br>üéâüéÅüéâ
            </div>

        </div>
    </div>


    <script>
        // --- 1. –õ–û–ì–ò–ö–ê –¢–û–†–¢–ê (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ---
        
        const cakeSection = document.getElementById('cake-section');
        const flames = document.querySelectorAll('.flame');
        const promptEl = document.getElementById('click-prompt');
        const swipeAppSection = document.getElementById('swipe-app-section');

        cakeSection.addEventListener('click', blowOutCandles);

        function blowOutCandles() {
            flames.forEach(flame => flame.classList.add('hidden'));
            promptEl.classList.add('hidden');
            cakeSection.style.cursor = 'default';
            cakeSection.removeEventListener('click', blowOutCandles);
            cakeSection.style.opacity = '0';
            cakeSection.style.transform = 'translateY(-50px) scale(0.9)';

            setTimeout(() => {
                cakeSection.classList.add('hidden');
                swipeAppSection.classList.add('active');
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—Ç–æ–ø–∫—É –∫–∞—Ä—Ç–æ—á–µ–∫, –∫–æ–≥–¥–∞ –æ–Ω–∏ —Å—Ç–∞–ª–∏ –≤–∏–¥–∏–º—ã
                initCards();
            }, 700);
        }

        // --- 2. –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê SWIPE APP ---
        
        const cardStack = document.getElementById('card-stack');
        const allDoneMessage = document.getElementById('all-done-message');
        
        // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ (–∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π - "All Done") –≤ –º–∞—Å—Å–∏–≤
        let cards = Array.from(cardStack.querySelectorAll('.card'));
        
        let isDragging = false;
        let activeCard = null;
        let startX, currentX;
        
        function initCards() {
            if (cards.length === 0) {
                allDoneMessage.classList.add('visible');
                return;
            }

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º z-index –∏ transform –¥–ª—è "—Å—Ç–æ–ø–∫–∏"
            cards.forEach((card, index) => {
                card.style.zIndex = cards.length - index;
                card.style.transform = `scale(${1 - (cards.length - 1 - index) * 0.05}) translateY(${(cards.length - 1 - index) * 10}px)`;
            });
            
            // –ü–æ–ª—É—á–∞–µ–º –≤–µ—Ä—Ö–Ω—é—é –∫–∞—Ä—Ç–æ—á–∫—É
            activeCard = cards[cards.length - 1];
            
            // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            addEventListeners(activeCard);
        }

        function addEventListeners(card) {
            // –î–ª—è –º—ã—à–∏
            card.addEventListener('mousedown', dragStart);
            // –î–ª—è —Å–µ–Ω—Å–æ—Ä–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤
            card.addEventListener('touchstart', dragStart, { passive: true });
        }
        
        function dragStart(e) {
            if (isDragging) return;
            isDragging = true;
            
            activeCard = e.currentTarget;
            activeCard.classList.add('dragging');
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É X
            startX = e.pageX || e.touches[0].pageX;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—à–∞—Ç–µ–ª–∏ –Ω–∞ –≤—Å—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–¥–ª—è –º—ã—à–∏)
            document.addEventListener('mousemove', dragMove);
            document.addEventListener('mouseup', dragEnd);
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—à–∞—Ç–µ–ª–∏ –Ω–∞ –≤—Å—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–¥–ª—è —Å–µ–Ω—Å–æ—Ä–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤)
            document.addEventListener('touchmove', dragMove, { passive: true });
            document.addEventListener('touchend', dragEnd, { passive: true });
        }
        
        function dragMove(e) {
            if (!isDragging || !activeCard) return;
            
            // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É X
            const currentX = e.pageX || e.touches[0].pageX;
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–¥–≤–∏–≥
            const deltaX = currentX - startX;
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —É–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞ (—á–µ–º –¥–∞–ª—å—à–µ, —Ç–µ–º —Å–∏–ª—å–Ω–µ–µ –Ω–∞–∫–ª–æ–Ω)
            const rotation = deltaX * 0.1; 
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º transform: —Å–¥–≤–∏–≥ + –ø–æ–≤–æ—Ä–æ—Ç
            activeCard.style.transform = `translateX(${deltaX}px) rotate(${rotation}deg)`;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º "Like" / "Nope"
            updateChoiceOpacity(deltaX);
        }
        
        function dragEnd(e) {
            if (!isDragging || !activeCard) return;
            isDragging = false;
            
            activeCard.classList.remove('dragging');

            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∏—Ç–æ–≥–æ–≤—ã–π —Å–¥–≤–∏–≥
            const deltaX = (e.pageX || e.changedTouches[0].pageX) - startX;
            
            // –ü–æ—Ä–æ–≥ –¥–ª—è —Å–≤–∞–π–ø–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 100px)
            const swipeThreshold = activeCard.offsetWidth / 3; 

            if (Math.abs(deltaX) > swipeThreshold) {
                // –°–≤–∞–π–ø –∑–∞—Å—á–∏—Ç–∞–Ω
                swipeOutCard(deltaX > 0);
            } else {
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É –Ω–∞ –º–µ—Å—Ç–æ
                snapBackCard();
            }

            // –£–¥–∞–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–ª—É—à–∞—Ç–µ–ª–∏
            document.removeEventListener('mousemove', dragMove);
            document.removeEventListener('mouseup', dragEnd);
            document.removeEventListener('touchmove', dragMove);
            document.removeEventListener('touchend', dragEnd);
        }

        function updateChoiceOpacity(deltaX) {
            const likeEl = activeCard.querySelector('.choice.like');
            const nopeEl = activeCard.querySelector('.choice.nope');
            
            // –ü–æ—Ä–æ–≥ –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑–∞
            const opacityThreshold = 50; 
            
            // –û—á–∏—â–∞–µ–º opacity
            likeEl.style.opacity = 0;
            nopeEl.style.opacity = 0;

            if (deltaX > opacityThreshold) {
                // –°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ (Like)
                likeEl.style.opacity = (deltaX - opacityThreshold) / opacityThreshold;
            } else if (deltaX < -opacityThreshold) {
                // –°–≤–∞–π–ø –≤–ª–µ–≤–æ (Nope)
                nopeEl.style.opacity = (Math.abs(deltaX) - opacityThreshold) / opacityThreshold;
            }
        }
        
        function swipeOutCard(isLike) {
            // –°–¥–≤–∏–≥–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É –¥–∞–ª–µ–∫–æ –∑–∞ —ç–∫—Ä–∞–Ω
            const endX = isLike ? window.innerWidth : -window.innerWidth * 1.5;
            activeCard.style.transform = `translateX(${endX}px) rotate(${isLike ? 15 : -15}deg)`;
            
            // –£–¥–∞–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫—É –∏–∑ –Ω–∞—à–µ–≥–æ –º–∞—Å—Å–∏–≤–∞
            const swipedCard = cards.pop();
            activeCard = null; // –ë–æ–ª—å—à–µ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏

            // –ñ–¥–µ–º –æ–∫–æ–Ω—á–∞–Ω–∏—è CSS-–∞–Ω–∏–º–∞—Ü–∏–∏
            swipedCard.addEventListener('transitionend', () => {
                swipedCard.remove(); // –£–¥–∞–ª—è–µ–º –∏–∑ DOM
            }, { once: true });
            
            // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º —Å–ª–µ–¥—É—é—â—É—é –∫–∞—Ä—Ç–æ—á–∫—É
            if (cards.length > 0) {
                const nextCard = cards[cards.length - 1];
                // –í—ã–≤–æ–¥–∏–º –µ–µ –Ω–∞ –ø–µ—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω
                nextCard.style.transform = 'scale(1) translateY(0)';
                // –ù–∞–∑–Ω–∞—á–∞–µ–º –µ–π —Å–ª—É—à–∞—Ç–µ–ª–∏
                addEventListeners(nextCard);
            } else {
                // –ö–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å
                allDoneMessage.classList.add('visible');
            }
        }

        function snapBackCard() {
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞ –∏—Å—Ö–æ–¥–Ω—É—é –ø–æ–∑–∏—Ü–∏—é
            const originalTransform = `scale(${1 - (cards.length - 1 - cards.indexOf(activeCard)) * 0.05}) translateY(${(cards.length - 1 - cards.indexOf(activeCard)) * 10}px)`;
            
            // –¢–∞–∫ –∫–∞–∫ —ç—Ç–æ –≤—Å–µ–≥–¥–∞ –≤–µ—Ä—Ö–Ω—è—è –∫–∞—Ä—Ç–∞, —Ç–æ:
            activeCard.style.transform = `scale(1) translateY(0) rotate(0deg)`;
            
            // –ü—Ä—è—á–µ–º "Like" / "Nope"
            updateChoiceOpacity(0);
        }

    </script>
</body>
</html>
