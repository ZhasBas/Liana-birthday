<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–° –î–Ω–µ–º –†–æ–∂–¥–µ–Ω–∏—è!</title>
    <style>
        /* --- –û–±—â–∏–µ —Å—Ç–∏–ª–∏ --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            min-height: 100vh;
            margin: 0;
            overflow: hidden; /* –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: —É–±–∏—Ä–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
        }

        /* --- –ù–û–í–´–ô –≠–õ–ï–ú–ï–ù–¢: –ö–û–ù–§–ï–¢–¢–ò --- */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            /* –ù–µ –º–µ—à–∞–µ—Ç –∫–ª–∏–∫–∞–º/—Å–≤–∞–π–ø–∞–º */
            pointer-events: none; 
            /* –ü–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ */
            z-index: 100; 
            /* –ù–∞—á–∏–Ω–∞–µ–º –Ω–µ–≤–∏–¥–∏–º—ã–º */
            opacity: 0; 
            transition: opacity 1s ease-in;
        }

        /* --- –°–µ–∫—Ü–∏—è —Å —Ç–æ—Ä—Ç–æ–º (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) --- */
        #cake-section {
            position: relative;
            text-align: center;
            cursor: pointer;
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            z-index: 10;
        }

        #cake-section img {
            max-width: 300px;
            border-radius: 10px;
        }

        #click-prompt {
            margin-top: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .flame {
            position: absolute;
            width: 16px;
            height: 25px;
            background-color: #FFC107;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            box-shadow: 0 0 10px #FFC107, 0 0 20px #FFC107, 0 0 30px #FFEB3B;
            animation: flicker 1s infinite alternate;
            transform-origin: bottom;
            z-index: 11;
        }
        
        #flame1 { top: 35%; left: 47%; }

        @keyframes flicker {
            0% { transform: scaleY(1) scaleX(1); opacity: 1; }
            50% { transform: scaleY(0.9) scaleX(1.05); opacity: 0.8; }
            100% { transform: scaleY(1.05) scaleX(1); opacity: 1; }
        }
        
        /* --- –°–ï–ö–¶–ò–Ø SWIPE APP --- */
        
        #swipe-app-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.7s ease-in;
            z-index: 5;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none; 
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        
        #swipe-app-section.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å—Ç–æ–ø–∫–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ */
        #card-stack {
            position: relative;
            width: 90vw;
            height: 80vh;
            max-width: 400px;
            max-height: 600px;
        }
        
        /* –°—Ç–∏–ª—å –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 30px;
            box-sizing: border-box;
            font-size: 1.8rem;
            text-align: center;
            line-height: 1.5;
            color: #444;
            /* –ò–ó–ú–ï–ù–ï–ù–ò–ï: 
              –£–±–∏—Ä–∞–µ–º transition –æ—Ç—Å—é–¥–∞, –±—É–¥–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ JS,
              —á—Ç–æ–±—ã –±—ã–ª–æ –±–æ–ª–µ–µ –ø–ª–∞–≤–Ω–æ–µ "–≤—Å—Ç–∞–≤–∞–Ω–∏–µ" –∫–∞—Ä—Ç—ã –Ω–∞ –º–µ—Å—Ç–æ.
            */
            /* transition: transform 0.3s ease-out; */ 
            cursor: grab;
        }
        
        .card.dragging {
            transition: none;
            cursor: grabbing;
        }
        
        .card:nth-child(odd) { background-color: #e3f2fd; }
        .card:nth-child(even) { background-color: #fff9c4; }

        /* "–õ–∞–π–∫" / "–î–∏–∑–ª–∞–π–∫" –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã */
        .choice {
            position: absolute;
            top: 40px;
            font-size: 2.5rem;
            font-weight: bold;
            text-transform: uppercase;
            border-radius: 10px;
            padding: 10px 15px;
            opacity: 0;
            transition: opacity 0.1s linear;
        }
        
        .choice.like {
            left: 20px;
            color: #4CAF50;
            border: 4px solid #4CAF50;
            transform: rotate(-15deg);
        }
        
        .choice.nope {
            right: 20px;
            color: #F44336;
            border: 4px solid #F44336;
            transform: rotate(15deg);
        }

        /* --- –ö–ª–∞—Å—Å—ã –¥–ª—è JS --- */
        .hidden {
            display: none !important;
            opacity: 0 !important;
            transform: scale(0.8);
        }
    </style>
</head>
<body>

    <!-- –ù–û–í–´–ô –≠–õ–ï–ú–ï–ù–¢: CANVAS –î–õ–Ø –ö–û–ù–§–ï–¢–¢–ò -->
    <canvas id="confetti-canvas"></canvas>

    <!-- 1. –°–ï–ö–¶–ò–Ø –° –¢–û–†–¢–û–ú -->
    <div id="cake-section">
        <img src="https://images.pexels.com/photos/1055272/pexels-photo-1055272.jpeg?auto=compress&cs=tinysrgb&w=600" alt="–¢–æ—Ä—Ç —Å–æ —Å–≤–µ—á–∞–º–∏">
        <div class="flame" id="flame1"></div>
        <div id="click-prompt">–ù–∞–∂–º–∏ –Ω–∞ —Ç–æ—Ä—Ç, —á—Ç–æ–±—ã –∑–∞–¥—É—Ç—å —Å–≤–µ—á–∏!</div>
    </div>

    <!-- 2. –°–ï–ö–¶–ò–Ø SWIPE APP -->
    <div id="swipe-app-section">
        <div id="card-stack">
            
            <div class="card">
                –ö—Ä–µ–ø–∫–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è, –Ω–µ–∏—Å—Å—è–∫–∞–µ–º–æ–π —ç–Ω–µ—Ä–≥–∏–∏ –∏ –º–æ—Ä–µ –∏—Å–∫—Ä–µ–Ω–Ω–∏—Ö —É–ª—ã–±–æ–∫! üòä
                <div class="choice like">Like</div>
                <div class="choice nope">Nope</div>
            </div>

            <div class="card">
                –ü—É—Å—Ç—å –≤—Å–µ —Ç–≤–æ–∏ –º–µ—á—Ç—ã —Å–±—ã–≤–∞—é—Ç—Å—è, –∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø—Ä–∏–Ω–æ—Å–∏—Ç —Ä–∞–¥–æ—Å—Ç—å! üöÄ
                <div class="choice like">Like</div>
                <div class="choice nope">Nope</div>
            </div>
            
            <div class="card">
                –ñ–µ–ª–∞—é —Å–∞–º–æ–≥–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ–≥–æ –≥–æ–¥–∞, –ø–æ–ª–Ω–æ–≥–æ —Å—á–∞—Å—Ç—å—è, –ª—é–±–≤–∏ –∏ —É—Å–ø–µ—Ö–∞! üåü
                <div class="choice like">Like</div>
                <div class="choice nope">Nope</div>
            </div>

            <div class="card">
                ü•≥ –° –î–Ω–µ–º –†–æ–∂–¥–µ–Ω–∏—è! ü•≥<br><br>–ü—É—Å—Ç—å —ç—Ç–æ—Ç –≥–æ–¥ –±—É–¥–µ—Ç –ø–æ–ª–æ–Ω —è—Ä–∫–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤!
                <div class="choice like">Like</div>
                <div class="choice nope">Nope</div>
            </div>

        </div>
    </div>


    <script>
        // --- 1. –õ–û–ì–ò–ö–ê –¢–û–†–¢–ê (–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ---
        
        const cakeSection = document.getElementById('cake-section');
        const flames = document.querySelectorAll('.flame');
        const promptEl = document.getElementById('click-prompt');
        const swipeAppSection = document.getElementById('swipe-app-section');

        cakeSection.addEventListener('click', blowOutCandles);

        function blowOutCandles() {
            flames.forEach(flame => flame.classList.add('hidden'));
            promptEl.classList.add('hidden');
            cakeSection.style.cursor = 'default';
            cakeSection.removeEventListener('click', blowOutCandles);
            cakeSection.style.opacity = '0';
            cakeSection.style.transform = 'translateY(-50px) scale(0.9)';

            setTimeout(() => {
                cakeSection.classList.add('hidden');
                swipeAppSection.classList.add('active');
                
                startConfetti();
                initCards();
            }, 700);
        }

        // --- 2. –õ–û–ì–ò–ö–ê SWIPE APP (–õ–û–ì–ò–ö–ê –ò–ó–ú–ï–ù–ï–ù–ê) ---
        
        const cardStack = document.getElementById('card-stack');
        let cards = Array.from(cardStack.querySelectorAll('.card'));
        
        let isDragging = false;
        let activeCard = null;
        let startX, currentX;
        
        // –ò–ó–ú–ï–ù–ï–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–æ–ø–∫–∏
        function initCards() {
            if (cards.length === 0) return;

            cards.forEach((card, index) => {
                const stackPosition = cards.length - 1 - index; // 0=–≤–µ—Ä—Ö, 1=–≤—Ç–æ—Ä–∞—è, 2=—Ç—Ä–µ—Ç—å—è...
                card.style.zIndex = cards.length - index; // z-index (—É –≤–µ—Ä—Ö–Ω–µ–π —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π)
                card.style.transition = 'transform 0.3s ease-out'; // –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞ –º–µ—Å—Ç–æ

                if (stackPosition === 0) {
                    // –í–µ—Ä—Ö–Ω—è—è –∫–∞—Ä—Ç–∞
                    card.style.transform = 'scale(1) translateY(0)';
                    addEventListeners(card); // –í–µ—à–∞–µ–º —Å–ª—É—à–∞—Ç–µ–ª–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω–µ–µ
                } else if (stackPosition === 1) {
                    // –í—Ç–æ—Ä–∞—è –∫–∞—Ä—Ç–∞
                    card.style.transform = 'scale(0.95) translateY(10px)';
                } else {
                    // –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã –≤ —Å—Ç–æ–ø–∫–µ
                    card.style.transform = 'scale(0.9) translateY(20px)';
                }
            });
            
            activeCard = cards[cards.length - 1];
        }

        function addEventListeners(card) {
            if (!card) return;
            card.addEventListener('mousedown', dragStart);
            card.addEventListener('touchstart', dragStart, { passive: true });
        }
        
        function dragStart(e) {
            if (isDragging) return;
            isDragging = true;
            
            activeCard = e.currentTarget;
            activeCard.classList.add('dragging');
            activeCard.style.transition = 'none'; // –û—Ç–∫–ª—é—á–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏
            
            startX = e.pageX || e.touches[0].pageX;
            
            document.addEventListener('mousemove', dragMove);
            document.addEventListener('mouseup', dragEnd);
            document.addEventListener('touchmove', dragMove, { passive: true });
            document.addEventListener('touchend', dragEnd, { passive: true });
        }
        
        function dragMove(e) {
            if (!isDragging || !activeCard) return;
            
            currentX = e.pageX || e.touches[0].pageX;
            const deltaX = currentX - startX;
            const rotation = deltaX * 0.1; 
            
            activeCard.style.transform = `translateX(${deltaX}px) rotate(${rotation}deg)`;
            
            updateChoiceOpacity(deltaX);
        }
        
        function dragEnd(e) {
            if (!isDragging || !activeCard) return;
            isDragging = false;
            
            activeCard.classList.remove('dragging');

            const deltaX = (e.pageX || e.changedTouches[0].pageX) - startX;
            const swipeThreshold = activeCard.offsetWidth / 3; 

            if (Math.abs(deltaX) > swipeThreshold) {
                swipeOutCard(deltaX > 0);
            } else {
                snapBackCard();
            }

            document.removeEventListener('mousemove', dragMove);
            document.removeEventListener('mouseup', dragEnd);
            document.removeEventListener('touchmove', dragMove);
            document.removeEventListener('touchend', dragEnd);
        }

        function updateChoiceOpacity(deltaX) {
            const likeEl = activeCard.querySelector('.choice.like');
            const nopeEl = activeCard.querySelector('.choice.nope');
            const opacityThreshold = 50; 
            
            likeEl.style.opacity = 0;
            nopeEl.style.opacity = 0;

            if (deltaX > opacityThreshold) {
                likeEl.style.opacity = (deltaX - opacityThreshold) / opacityThreshold;
            } else if (deltaX < -opacityThreshold) {
                nopeEl.style.opacity = (Math.abs(deltaX) - opacityThreshold) / opacityThreshold;
            }
        }
        
        // –ò–ó–ú–ï–ù–ï–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø: –ù–æ–≤–∞—è "Tinder-like" –ª–æ–≥–∏–∫–∞ —Å–≤–∞–π–ø–∞
        function swipeOutCard(isLike) {
            const swipedCard = cards.pop(); // 1. –í–∑—è–ª–∏ –≤–µ—Ä—Ö–Ω—é—é –∫–∞—Ä—Ç—É –∏–∑ –º–∞—Å—Å–∏–≤–∞
            activeCard = null;

            // 2. –°–Ω–∏–º–∞–µ–º —Å –Ω–µ–µ —Å–ª—É—à–∞—Ç–µ–ª–∏
            swipedCard.removeEventListener('mousedown', dragStart);
            swipedCard.removeEventListener('touchstart', dragStart);

            // 3. –ê–Ω–∏–º–∏—Ä—É–µ–º –µ–µ "—É–ª–µ—Ç–∞–Ω–∏–µ"
            const endX = isLike ? window.innerWidth * 1.5 : -window.innerWidth * 1.5;
            swipedCard.style.transition = 'transform 0.5s ease-in'; // –ê–Ω–∏–º–∞—Ü–∏—è —É–ª–µ—Ç–∞–Ω–∏—è
            swipedCard.style.transform = `translateX(${endX}px) rotate(${isLike ? 30 : -30}deg)`;
            
            // 4. –ê–Ω–∏–º–∏—Ä—É–µ–º –°–õ–ï–î–£–Æ–©–£–Æ –∫–∞—Ä—Ç—É (–µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å)
            if (cards.length > 0) {
                const newTopCard = cards[cards.length - 1];
                newTopCard.style.transition = 'transform 0.3s ease-out';
                newTopCard.style.transform = 'scale(1) translateY(0)'; // –°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–µ—Ä—Ö–Ω–µ–π
                newTopCard.style.zIndex = cards.length;
                addEventListeners(newTopCard); // –ù–∞–∑–Ω–∞—á–∞–µ–º —Å–ª—É—à–∞—Ç–µ–ª–∏
                activeCard = newTopCard;
            }
            
            // 5. –ê–Ω–∏–º–∏—Ä—É–µ–º –¢–†–ï–¢–¨–Æ –∫–∞—Ä—Ç—É (–µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å)
            if (cards.length > 1) {
                const newSecondCard = cards[cards.length - 2];
                newSecondCard.style.transition = 'transform 0.3s ease-out';
                newSecondCard.style.transform = 'scale(0.95) translateY(10px)'; // –°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤—Ç–æ—Ä–æ–π
                newSecondCard.style.zIndex = cards.length - 1;
            }

            // 6. –ö–æ–≥–¥–∞ —É–ª–µ—Ç–µ–≤—à–∞—è –∫–∞—Ä—Ç–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞ –∞–Ω–∏–º–∞—Ü–∏—é, –ø–µ—Ä–µ–º–µ—â–∞–µ–º –µ–µ –≤ –Ω–∏–∑
            swipedCard.addEventListener('transitionend', () => {
                swipedCard.style.transition = 'none'; // –í—ã–∫–ª—é—á–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
                swipedCard.style.zIndex = 1; // –°–∞–º—ã–π –Ω–∏–∑–∫–∏–π z-index
                swipedCard.style.transform = 'scale(0.9) translateY(20px)'; // –°—Ç–∞–≤–∏–º –≤ –Ω–∏–∑ —Å—Ç–æ–ø–∫–∏
                cards.unshift(swipedCard); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ –º–∞—Å—Å–∏–≤ (–≤ –Ω–∞—á–∞–ª–æ)
                
                // –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∞–µ–º z-index –¥–ª—è –≤—Å–µ–π —Å—Ç–æ–ø–∫–∏, —á—Ç–æ–±—ã –≤—Å–µ –±—ã–ª–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
                cards.forEach((card, index) => {
                    card.style.zIndex = cards.length - index;
                });

            }, { once: true });
        }

        function snapBackCard() {
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞ –∏—Å—Ö–æ–¥–Ω—É—é –ø–æ–∑–∏—Ü–∏—é (–≤–µ—Ä—Ö —Å—Ç–æ–ø–∫–∏)
            activeCard.style.transition = 'transform 0.3s ease-out'; // –ü–ª–∞–≤–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç
            activeCard.style.transform = `scale(1) translateY(0) rotate(0deg)`;
            updateChoiceOpacity(0);
        }


        // --- 3. –õ–û–ì–ò–ö–ê –ö–û–ù–§–ï–¢–¢–ò (–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ---
        
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        let canvasWidth = window.innerWidth;
        let canvasHeight = window.innerHeight;
        canvas.width = canvasWidth;
        canvas.height = canvasHeight;
        
        const particles = [];
        const particleCount = 100;
        const colors = ["#f94144", "#f3722c", "#f8961e", "#f9c74f", "#90be6d", "#43aa8b", "#577590"];

        function resizeCanvas() {
            canvasWidth = window.innerWidth;
            canvasHeight = window.innerHeight;
            canvas.width = canvasWidth;
            canvas.height = canvasHeight;
        }
        window.addEventListener('resize', resizeCanvas);

        function createParticle() {
            return {
                x: Math.random() * canvasWidth,
                y: -20,
                w: 10 + Math.random() * 10,
                h: 10 + Math.random() * 10,
                color: colors[Math.floor(Math.random() * colors.length)],
                vy: 2 + Math.random() * 3,
                vx: (Math.random() - 0.5) * 4,
                angle: Math.random() * Math.PI * 2,
                spin: (Math.random() - 0.5) * 0.1
            };
        }

        function initConfetti() {
            for (let i = 0; i < particleCount; i++) {
                particles.push(createParticle());
            }
        }

        function animateConfetti() {
            ctx.clearRect(0, 0, canvasWidth, canvasHeight);
            
            for (let i = 0; i < particles.length; i++) {
                const p = particles[i];
                
                p.y += p.vy;
                p.x += p.vx;
                p.angle += p.spin;
                
                ctx.save();
                ctx.translate(p.x + p.w / 2, p.y + p.h / 2);
                ctx.rotate(p.angle);
                ctx.fillStyle = p.color;
                ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
                ctx.restore();
                
                if (p.y > canvasHeight + 20) {
                    particles[i] = createParticle();
                }
            }
            
            requestAnimationFrame(animateConfetti);
        }

        function startConfetti() {
            canvas.style.opacity = '1';
            initConfetti();
            animateConfetti();
        }

    </script>
</body>
</html>

